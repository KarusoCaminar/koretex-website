// Route to Sample - KORRIGIERT!

const sample = String($json.query?.sample || '').trim();

console.log('üîç [Route to Sample] Sample Parameter:', sample);
console.log('üìã Raw query:', $json.query);

// Konvertiere zu String (sicher)
const sampleStr = String(sample).trim();

// Route basierend auf Sample
let route = 'upload'; // Default: Upload
let loadSampleNode = null;

if (sampleStr === '1') {
    route = 'sample-1';
    loadSampleNode = 'Lade Sample 1';
    console.log('‚úÖ Route: Sample 1');
} else if (sampleStr === '2') {
    route = 'sample-2';
    loadSampleNode = 'Lade Sample 2';
    console.log('‚úÖ Route: Sample 2');
} else if (sampleStr === '3') {
    route = 'sample-3';
    loadSampleNode = 'Lade Sample 3';
    console.log('‚úÖ Route: Sample 3');
} else {
    route = 'upload';
    console.log('‚úÖ Route: Upload (kein Sample)');
}

// KRITISCH: $json richtig verwenden!
// $json ist bereits das JSON-Objekt, nicht $json.json!
return [{
    json: {
        ...$json,  // ‚Üê Spread operator verwenden, NICHT $json direkt!
        route: route,
        loadSampleNode: loadSampleNode,
        sample: sampleStr
    }
}];

